<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Bagian view aset: list/form/search untuk aktivitas CRUD utama. Lokasi memakai field relasi agar pilihan konsisten dari master lokasi. -->
    <record id="view_pal_asset_list" model="ir.ui.view">
        <field name="name">pal.asset.list</field>
        <field name="model">pal.asset</field>
        <field name="arch" type="xml">
            <list string="Asset Register" editable="bottom">
                <field name="name"/>
                <field name="code"/>
                <field name="location_id"/>
                <field name="condition"/>
                <field name="purchase_date"/>
            </list>
        </field>
    </record>

    <record id="view_pal_asset_form" model="ir.ui.view">
        <field name="name">pal.asset.form</field>
        <field name="model">pal.asset</field>
        <field name="arch" type="xml">
            <form string="Asset Register">
                <sheet>
                    <group>
                        <field name="name"/>
                        <field name="code"/>
                        <field name="location_id"/>
                        <field name="condition"/>
                        <field name="purchase_date"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_pal_asset_search" model="ir.ui.view">
        <field name="name">pal.asset.search</field>
        <field name="model">pal.asset</field>
        <field name="arch" type="xml">
            <search string="Search Assets">
                <field name="name" string="Nama"/>
                <field name="code" string="Kode"/>
                <field name="location_id" string="Lokasi"/>
                <field name="name" string="Nama/Kode/Lokasi" filter_domain="['|', '|', ('name','ilike', self), ('code','ilike', self), ('location_id.name','ilike', self)]"/>

                <filter string="Kondisi Baik" name="cond_baik" domain="[('condition','=','baik')]"/>
                <filter string="Kondisi Rusak" name="cond_rusak" domain="[('condition','=','rusak')]"/>
                <filter string="Kondisi Perbaikan" name="cond_perbaikan" domain="[('condition','=','perbaikan')]"/>

                <group expand="0" string="Group By">
                    <filter string="Lokasi" name="group_location" context="{'group_by':'location_id'}"/>
                    <filter string="Kondisi" name="group_condition" context="{'group_by':'condition'}"/>
                </group>
            </search>
        </field>
    </record>

    <record id="action_pal_asset" model="ir.actions.act_window">
        <field name="name">Asset Register</field>
        <field name="res_model">pal.asset</field>
        <field name="view_mode">list,form</field>
    </record>

    <!-- Bagian view master lokasi: dipakai untuk menambah/mengubah daftar lokasi yang nantinya dipilih di data aset. -->
    <record id="view_pal_asset_location_list" model="ir.ui.view">
        <field name="name">pal.asset.location.list</field>
        <field name="model">pal.asset.location</field>
        <field name="arch" type="xml">
            <list string="Master Lokasi" editable="bottom">
                <field name="name"/>
                <field name="code"/>
                <field name="active"/>
            </list>
        </field>
    </record>

    <record id="view_pal_asset_location_form" model="ir.ui.view">
        <field name="name">pal.asset.location.form</field>
        <field name="model">pal.asset.location</field>
        <field name="arch" type="xml">
            <form string="Master Lokasi">
                <sheet>
                    <group>
                        <field name="name"/>
                        <field name="code"/>
                        <field name="active"/>
                        <field name="note"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_pal_asset_location_search" model="ir.ui.view">
        <field name="name">pal.asset.location.search</field>
        <field name="model">pal.asset.location</field>
        <field name="arch" type="xml">
            <search string="Search Lokasi">
                <field name="name" string="Nama Lokasi"/>
                <field name="code" string="Kode Lokasi"/>
                <filter string="Aktif" name="active_only" domain="[('active','=',True)]"/>
            </search>
        </field>
    </record>

    <record id="action_pal_asset_location" model="ir.actions.act_window">
        <field name="name">Master Lokasi</field>
        <field name="res_model">pal.asset.location</field>
        <field name="view_mode">list,form</field>
    </record>

    <!-- Bagian menu: root aplikasi, menu aset, dan menu master lokasi agar user bisa kelola data referensi dulu. -->
    <menuitem id="menu_pal_asset_root" name="Asset Register" sequence="10"/>
    <menuitem id="menu_pal_asset" name="Assets" parent="menu_pal_asset_root" action="action_pal_asset" sequence="10"/>
    <menuitem id="menu_pal_asset_location" name="Master Lokasi" parent="menu_pal_asset_root" action="action_pal_asset_location" sequence="20"/>
</odoo>
